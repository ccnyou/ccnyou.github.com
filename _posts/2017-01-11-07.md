---
layout: post
title: 【翻译】编写可测试代码的艺术
---
{% capture base_image_path %}{{ site.url }}/images{{ page.id }}{% endcapture %}
原文：[http://misko.hevery.com/code-reviewers-guide/](http://misko.hevery.com/code-reviewers-guide/)    
按个人理解翻译，有哪里理解不对通过邮箱给我留意见: ccnyou@qq.com    
还在持续翻译中，先发整体框架上来...

## 缺陷一：构造函数做太多工作

### 警告标志：  
* 构造函数中或者在字段声明处出现 `new` 关键字。
* 构造函数中或者在字段声明处出现静态函数调用。
* 在构造函数中做任何字段赋值的事情。
* 在构造函数之后对象没有完全初始化(注意`initialize`方法)。
* 在构造函数中出现控制流(条件、循环逻辑)。
* 用代码做复杂的对象图构造而不是工厂模式或者构造器。
* 添加或者使用初始化块。


## 缺陷二：挖掘合作者

### 警告标志： 
* 对象被传递进去但是不直接使用(只是为了用来访问其他对象)
* 违反Demeter法则：方法调用链用点（.）来遍历对象图。
* 可疑的命名：`context, environment, principal, container, manager`。


## 缺陷三：脆弱的全局状态和单例

### 警告标志： 
* 添加或者使用单例。
* 添加或者使用静态字段或者静态函数。
* 添加或者使用静态初始化块。
* 添加或者使用注册机制。
* 添加或者使用服务定位器。
 

## 缺陷四：类做太多事情

### 警告标志： 
* 类功能总结起来包含“和”字。
* 类很难让团队新成员阅读快速理解。
* 类包含部分字段只在部分方法中用到。
* 类包含只操作参数的静态方法

